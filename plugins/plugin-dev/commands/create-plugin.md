---
description: 引導式端對端插件創建工作流程，包含組件設計、實現和驗證
argument-hint: 可選的插件描述
allowed-tools: ["Read", "Write", "Grep", "Glob", "Bash", "TodoWrite", "AskUserQuestion", "Skill", "Task"]
---

# 插件創建工作流程

引導使用者從初始概念到測試實現，創建完整、高品質的 Claude Code 插件。遵循系統化方法：理解需求、設計組件、澄清細節、遵循最佳實踐實現、驗證和測試。

## 核心原則

- **詢問澄清問題**：識別關於插件目的、觸發、範圍和組件的所有模糊之處。提出具體、明確的問題，而不是做假設。在繼續實現之前等待使用者回答。
- **載入相關技能**：在需要時使用 Skill 工具載入 plugin-dev 技能（plugin-structure、hook-development、agent-development 等）
- **使用專門代理**：利用 agent-creator、plugin-validator 和 skill-reviewer 代理進行 AI 輔助開發
- **遵循最佳實踐**：應用 plugin-dev 自身實現中的模式
- **漸進式揭露**：創建精簡的技能，搭配 references/examples
- **使用 TodoWrite**：在所有階段追蹤進度

**初始請求：** $ARGUMENTS

---

## 階段 1：發現

**目標**：理解需要構建什麼插件以及它解決什麼問題

**操作**：
1. 創建包含所有 7 個階段的待辦清單
2. 如果從參數中可以清楚了解插件目的：
   - 總結理解
   - 識別插件類型（整合、工作流程、分析、工具包等）
3. 如果插件目的不明確，詢問使用者：
   - 這個插件解決什麼問題？
   - 誰會使用它以及何時使用？
   - 它應該做什麼？
   - 有類似的插件可參考嗎？
4. 總結理解並在繼續之前與使用者確認

**輸出**：清楚說明插件目的和目標使用者

---

## 階段 2：組件規劃

**目標**：確定需要什麼插件組件

**必須在此階段之前載入 plugin-structure 技能**。

**操作**：
1. 載入 plugin-structure 技能以理解組件類型
2. 分析插件需求並確定所需組件：
   - **技能**：是否需要專業知識？（鉤子 API、MCP 模式等）
   - **命令**：使用者發起的操作？（部署、配置、分析）
   - **代理**：自主任務？（驗證、生成、分析）
   - **鉤子**：事件驅動自動化？（驗證、通知）
   - **MCP**：外部服務整合？（資料庫、API）
   - **設定**：使用者配置？（.local.md 檔案）
3. 對於每種所需的組件類型，識別：
   - 每種類型的數量
   - 每個的功能
   - 大致的觸發/使用模式
4. 以表格形式向使用者呈現組件計劃
5. 獲取使用者確認或調整

**輸出**：確認要創建的組件清單

---

## 階段 3：詳細設計與澄清問題

**目標**：詳細指定每個組件並解決所有模糊之處

**關鍵**：這是最重要的階段之一。請勿跳過。

**操作**：
1. 對於計劃中的每個組件，識別未明確的方面
2. **以有組織的部分向使用者呈現所有問題**（每種組件類型一個部分）
3. **在繼續實現之前等待回答**
4. 如果使用者說「隨你怎麼做」，提供具體建議並獲得明確確認

**輸出**：每個組件的詳細規格

---

## 階段 4：插件結構創建

**目標**：創建插件目錄結構和清單

**操作**：
1. 確定插件名稱（kebab-case，描述性）
2. 選擇插件位置
3. 使用 bash 創建目錄結構
4. 使用 Write 工具創建 plugin.json 清單
5. 創建 README.md 模板
6. 如需要創建 .gitignore

**輸出**：插件目錄結構已創建並準備好接收組件

---

## 階段 5：組件實現

**目標**：遵循最佳實踐創建每個組件

**在實現每種組件類型之前載入相關技能**

**輸出**：所有插件組件已實現

---

## 階段 6：驗證與品質檢查

**目標**：確保插件符合品質標準並正常工作

**操作**：
1. 運行 plugin-validator 代理
2. 修復關鍵問題
3. 使用 skill-reviewer 審查（如果插件有技能）
4. 測試代理觸發（如果插件有代理）
5. 測試鉤子配置（如果插件有鉤子）
6. 呈現發現
7. 詢問使用者是否繼續

**輸出**：插件已驗證並準備測試

---

## 階段 7：測試與驗證

**目標**：測試插件在 Claude Code 中正常工作

**操作**：
1. 提供安裝說明
2. 提供驗證清單
3. 提供測試建議
4. 如果使用者需要，引導測試每個組件

**輸出**：插件已測試並驗證工作

---

## 階段 8：文檔與後續步驟

**目標**：確保插件有良好的文檔並準備好分發

**操作**：
1. 驗證 README 完整性
2. 添加市場條目（如果發布）
3. 創建摘要
4. 建議改進

**輸出**：完整、有文檔的插件準備使用或發布

---

**從階段 1：發現開始**
