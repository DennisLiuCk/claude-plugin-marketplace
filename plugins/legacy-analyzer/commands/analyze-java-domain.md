---
description: åˆ†æ Legacy Java Spring Boot å°ˆæ¡ˆä¸­çš„ç‰¹å®šé ˜åŸŸé‚è¼¯èˆ‡æ¥­å‹™æµç¨‹
allowed-tools:
  - Task
  - TodoWrite
  - Read
  - Write
  - Glob
  - Grep
  - Bash
---

# Legacy Java Domain Analyzer

é‡å°ä½¿ç”¨è€…æŒ‡å®šçš„é ˜åŸŸ/åŠŸèƒ½é—œéµå­—ï¼Œæ·±åº¦åˆ†æ Java Spring Boot å°ˆæ¡ˆä¸­çš„ç›¸é—œé‚è¼¯èˆ‡å®Œæ•´èª¿ç”¨éˆã€‚

**ä½¿ç”¨æ–¹å¼**ï¼š
```
/legacy-analyzer:analyze-java-domain è«‹åˆ†æå•†å“å»ºç«‹çš„æµç¨‹
/legacy-analyzer:analyze-java-domain åˆ†æè¨‚å–®å–æ¶ˆé‚è¼¯
/legacy-analyzer:analyze-java-domain æ•´ç†ç”¨æˆ¶è¨»å†Šæµç¨‹
```

**èˆ‡ analyze-java çš„å·®ç•°**ï¼š
- `analyze-java`ï¼šæƒæå…¨å°ˆæ¡ˆï¼Œç”Ÿæˆå®Œæ•´æ–‡ä»¶ï¼ˆ7-9 åˆ†é˜ï¼‰
- `analyze-java-domain`ï¼šå®šå‘æœå°‹ç‰¹å®šé ˜åŸŸï¼Œæ·±åº¦è¿½è¹¤èª¿ç”¨éˆï¼ˆ3-5 åˆ†é˜ï¼‰

---

## æœå°‹ç¯„åœé™åˆ¶

**åªæœå°‹ä»¥ä¸‹æª”æ¡ˆé¡å‹**ï¼š
- `.java` - Java åŸå§‹ç¢¼ï¼ˆController, Service, Repository, Entity ç­‰ï¼‰
- `.xml` - MyBatis Mapper æª”æ¡ˆï¼ˆSQL æŸ¥è©¢é‚è¼¯ï¼‰

**æ’é™¤çš„æª”æ¡ˆ**ï¼š
- `pom.xml` - Maven ä¾è³´å®šç¾©
- `build.gradle` - Gradle ä¾è³´å®šç¾©
- `.yml` / `.yaml` / `.properties` - é…ç½®æª”ï¼ˆèˆ‡é ˜åŸŸé‚è¼¯ç„¡é—œï¼‰

**Grep æœå°‹æ™‚å¿…é ˆä½¿ç”¨ glob åƒæ•¸é™åˆ¶ç¯„åœ**ï¼š
```
# æ­£ç¢ºæ–¹å¼
Grep: pattern="é—œéµå­—" glob="*.java"
Grep: pattern="é—œéµå­—" glob="*.xml" ï¼ˆæ’é™¤ pom.xml çš„çµæœï¼‰

# éŒ¯èª¤æ–¹å¼ï¼ˆä¸è¦é€™æ¨£åšï¼‰
Grep: pattern="é—œéµå­—" ï¼ˆæœƒæœå°‹æ‰€æœ‰æª”æ¡ˆï¼‰
```

---

è¦åŸ·è¡Œæ­¤æ“ä½œï¼Œè«‹ç²¾ç¢ºéµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š

## æº–å‚™å·¥ä½œ

1. **è§£æä½¿ç”¨è€…è¼¸å…¥**ï¼Œè­˜åˆ¥ï¼š
   - **é ˜åŸŸé—œéµå­—**ï¼ˆDomain Keywordsï¼‰ï¼šå¦‚ã€Œå•†å“å»ºç«‹ã€ã€ã€Œè¨‚å–®å–æ¶ˆã€ã€ã€Œç”¨æˆ¶è¨»å†Šã€
   - **æœå°‹é—œéµå­—**ï¼ˆSearch Keywordsï¼‰ï¼šå¾é ˜åŸŸé—œéµå­—æ¨å°å‡ºå¯èƒ½çš„ï¼š
     - ä¸­æ–‡è©å½™ï¼šå•†å“ã€ç”¢å“ã€å»ºç«‹ã€æ–°å¢ã€å‰µå»º
     - è‹±æ–‡è©å½™ï¼šProduct, Item, Goods, Create, Add, Insert
     - æ–¹æ³•åï¼šcreateProduct, addProduct, insertProduct, saveProduct
     - é¡åˆ¥åï¼šProductController, ProductService, ProductRepository
     - API è·¯å¾‘ï¼š/product, /products, /api/product

   **è¼¸å‡ºæœå°‹ç­–ç•¥ JSON**ï¼š
   ```json
   {
     "user_query": "å•†å“å»ºç«‹çš„æµç¨‹",
     "domain": "å•†å“å»ºç«‹",
     "search_keywords": {
       "chinese": ["å•†å“", "ç”¢å“", "å»ºç«‹", "æ–°å¢", "å‰µå»º"],
       "english": ["Product", "Item", "Goods", "Create", "Add", "Save"],
       "method_patterns": ["create.*Product", "add.*Product", "save.*Product", "insert.*Product"],
       "class_patterns": ["Product.*Controller", "Product.*Service", "Product.*Repository"],
       "api_patterns": ["/product", "/products", "POST.*product"]
     }
   }
   ```

2. ä½¿ç”¨ TodoWrite å»ºç«‹å¾…è¾¦äº‹é …æ¸…å–®

3. å‰µå»ºå·¥ä½œç›®éŒ„ï¼š`.legacy-analysis/domain-{keyword}-{timestamp}/`
   - keywordï¼šé ˜åŸŸé—œéµå­—çš„è‹±æ–‡ç°¡å¯«ï¼ˆå¦‚ product-createï¼‰

---

## éšæ®µ 1: å¿«é€Ÿè³‡æ ¼æª¢æŸ¥èˆ‡å…¥å£é»ç™¼ç¾

4. ä½¿ç”¨ **Haiku ä»£ç†**å¿«é€Ÿæª¢æŸ¥å°ˆæ¡ˆä¸¦æ‰¾å‡ºå…¥å£é»ï¼š

   **ä»£ç†ä»»å‹™**ï¼š
   - ç¢ºèªæ˜¯ Spring Boot å°ˆæ¡ˆï¼ˆæª¢æŸ¥ pom.xml æˆ– build.gradleï¼‰
   - ä½¿ç”¨ Grep æœå°‹æ‰€æœ‰æœå°‹é—œéµå­—ï¼Œçµ±è¨ˆåŒ¹é…æ•¸é‡
   - è­˜åˆ¥æœ€å¯èƒ½çš„**å…¥å£é»**ï¼ˆEntry Pointsï¼‰ï¼š
     - Controller é¡åˆ¥ä¸­åŒ…å«é—œéµå­—çš„æ–¹æ³•
     - API ç«¯é»ï¼ˆ@RequestMapping, @PostMapping, @GetMappingï¼‰

   **æœå°‹ç­–ç•¥**ï¼ˆå¿…é ˆé™åˆ¶æª”æ¡ˆé¡å‹ï¼‰ï¼š
   ```
   # æœå°‹ Controller ä¸­çš„ç›¸é—œç«¯é»ï¼ˆåªæœå°‹ .javaï¼‰
   Grep: pattern="@(Post|Put|Get|Delete)Mapping.*product" glob="*.java"
   Grep: pattern="@RequestMapping.*product" glob="*.java"

   # æœå°‹ Service ä¸­çš„ç›¸é—œæ–¹æ³•ï¼ˆåªæœå°‹ .javaï¼‰
   Grep: pattern="(create|add|save|insert).*Product" glob="*.java"

   # æœå°‹é¡åˆ¥å®šç¾©ï¼ˆåªæœå°‹ .javaï¼‰
   Grep: pattern="class.*Product.*(Controller|Service|Repository)" glob="*.java"

   # æœå°‹ MyBatis Mapper ä¸­çš„ç›¸é—œ SQLï¼ˆåªæœå°‹ .xmlï¼Œæ’é™¤ pom.xmlï¼‰
   Grep: pattern="<(select|insert|update|delete).*product" glob="*.xml"
   # æ³¨æ„ï¼šéæ¿¾çµæœæ™‚æ’é™¤ pom.xml
   ```

   **è¼¸å‡ºå…¥å£é» JSON**ï¼š
   ```json
   {
     "project_valid": true,
     "total_matches": 45,
     "entry_points": [
       {
         "type": "controller",
         "file": "src/main/java/com/example/controller/ProductController.java",
         "method": "createProduct",
         "http_method": "POST",
         "path": "/api/products",
         "line": 67
       },
       {
         "type": "controller",
         "file": "src/main/java/com/example/controller/ProductController.java",
         "method": "addProduct",
         "http_method": "POST",
         "path": "/api/products/add",
         "line": 112
       }
     ],
     "related_classes": [
       "ProductController",
       "ProductService",
       "ProductServiceImpl",
       "ProductRepository",
       "Product",
       "ProductDTO"
     ]
   }
   ```

   **å¦‚æœåŒ¹é…æ•¸é‡ = 0**ï¼Œè¼¸å‡ºå»ºè­°ä¸¦çµ‚æ­¢ï¼š
   ```
   âŒ æ‰¾ä¸åˆ°èˆ‡ã€Œ{é ˜åŸŸé—œéµå­—}ã€ç›¸é—œçš„ç¨‹å¼ç¢¼

   å»ºè­°å˜—è©¦ï¼š
   1. ä½¿ç”¨ä¸åŒçš„é—œéµå­—ï¼ˆå¦‚ã€Œå•†å“ã€æ”¹ç‚ºã€ŒProductã€æˆ–ã€ŒItemã€ï¼‰
   2. ç¢ºèªå°ˆæ¡ˆä¸­æ˜¯å¦æœ‰æ­¤åŠŸèƒ½
   3. ä½¿ç”¨ /legacy-analyzer:analyze-java é€²è¡Œå…¨å°ˆæ¡ˆæƒæ
   ```

5. å°‡å…¥å£é»è³‡è¨Šå¯«å…¥ï¼š`.legacy-analysis/domain-{keyword}-{timestamp}/01-entry-points.json`

---

## éšæ®µ 2: æ·±åº¦èª¿ç”¨éˆè¿½è¹¤

6. å°æ–¼æ¯å€‹å…¥å£é»ï¼Œå•Ÿå‹•ä¸€å€‹ **Sonnet ä»£ç†**é€²è¡Œæ·±åº¦è¿½è¹¤ã€‚

   **å¦‚æœå…¥å£é» <= 3 å€‹**ï¼šå…¨éƒ¨ä¸¦è¡Œå•Ÿå‹•
   **å¦‚æœå…¥å£é» > 3 å€‹**ï¼šåªè¿½è¹¤æœ€é‡è¦çš„ 3 å€‹ï¼ˆæ ¹æ“š HTTP æ–¹æ³•å„ªå…ˆç´šï¼šPOST > PUT > DELETE > GETï¼‰

   **æ¯å€‹è¿½è¹¤ä»£ç†çš„ä»»å‹™**ï¼š

   å¾å…¥å£é»é–‹å§‹ï¼Œéæ­¸è¿½è¹¤å®Œæ•´çš„èª¿ç”¨éˆï¼š

   ```
   Controller.method()
     â†“ èª¿ç”¨
   Service.method()
     â†“ èª¿ç”¨
   Repository.method()
     â†“ æ“ä½œ
   Entity
   ```

   **è¿½è¹¤æ­¥é©Ÿ**ï¼š

   a. **è®€å–å…¥å£ Controller æ–¹æ³•**ï¼š
      - ä½¿ç”¨ Read è®€å– Controller æª”æ¡ˆï¼ˆ.javaï¼‰
      - æ‰¾åˆ°ç›®æ¨™æ–¹æ³•
      - è­˜åˆ¥æ–¹æ³•å…§èª¿ç”¨çš„ Service

   b. **è¿½è¹¤ Service å±¤**ï¼š
      - è®€å– Service ä»‹é¢å’Œå¯¦ç¾é¡åˆ¥ï¼ˆ.javaï¼‰
      - åˆ†ææ¥­å‹™é‚è¼¯
      - è­˜åˆ¥èª¿ç”¨çš„ Repository å’Œå…¶ä»– Service

   c. **è¿½è¹¤ Repository å±¤**ï¼š
      - è®€å– Repository ä»‹é¢ï¼ˆ.javaï¼‰
      - è­˜åˆ¥è‡ªå®šç¾©æŸ¥è©¢æ–¹æ³•
      - **å¦‚æœä½¿ç”¨ MyBatis**ï¼šæœå°‹å°æ‡‰çš„ Mapper XML æª”æ¡ˆ
        ```
        # æ ¹æ“š Repository/Mapper ä»‹é¢åç¨±æœå°‹å°æ‡‰çš„ XML
        Glob: pattern="**/ProductMapper.xml"
        # æˆ–æœå°‹ XML ä¸­çš„ namespace
        Grep: pattern="namespace.*ProductMapper" glob="*.xml"
        ```

   d. **è¿½è¹¤ MyBatis Mapper XML**ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼š
      - è®€å– Mapper XML æª”æ¡ˆ
      - åˆ†æ SQL èªå¥ï¼ˆselect, insert, update, deleteï¼‰
      - è­˜åˆ¥å‹•æ…‹ SQLï¼ˆif, choose, foreachï¼‰
      - è¨˜éŒ„ resultMap å’Œåƒæ•¸æ˜ å°„

   e. **åˆ†æç›¸é—œ Entity**ï¼š
      - è®€å–æ¶‰åŠçš„ Entity é¡åˆ¥ï¼ˆ.javaï¼‰
      - åˆ†ææ¬„ä½å’Œé—œè¯é—œä¿‚

   f. **è­˜åˆ¥æ©«åˆ‡é—œæ³¨é»**ï¼š
      - @Transactional äº‹å‹™é‚Šç•Œ
      - ç•°å¸¸è™•ç†
      - é©—è­‰é‚è¼¯ï¼ˆ@Validï¼‰
      - æ—¥èªŒè¨˜éŒ„

   **è¼¸å‡ºèª¿ç”¨éˆ JSON**ï¼š
   ```json
   {
     "entry_point": {
       "file": "ProductController.java",
       "method": "createProduct",
       "line": 67
     },
     "call_chain": [
       {
         "level": 0,
         "type": "controller",
         "class": "ProductController",
         "method": "createProduct(ProductDTO)",
         "file": "src/.../ProductController.java",
         "lines": "67-85",
         "annotations": ["@PostMapping", "@Valid"],
         "description": "æ¥æ”¶å•†å“å»ºç«‹è«‹æ±‚ï¼Œé©—è­‰è¼¸å…¥",
         "calls": ["productService.createProduct"]
       },
       {
         "level": 1,
         "type": "service",
         "class": "ProductServiceImpl",
         "method": "createProduct(ProductDTO)",
         "file": "src/.../ProductServiceImpl.java",
         "lines": "45-78",
         "annotations": ["@Transactional"],
         "description": "æ ¸å¿ƒæ¥­å‹™é‚è¼¯ï¼šæª¢æŸ¥å•†å“åç¨±é‡è¤‡ã€è¨­å®šé è¨­å€¼ã€ä¿å­˜å•†å“",
         "calls": ["productRepository.existsByName", "productRepository.save"],
         "business_rules": [
           "å•†å“åç¨±ä¸å¯é‡è¤‡",
           "åƒ¹æ ¼å¿…é ˆå¤§æ–¼ 0",
           "åº«å­˜é è¨­ç‚º 0"
         ]
       },
       {
         "level": 2,
         "type": "repository",
         "class": "ProductRepository",
         "method": "save(Product)",
         "file": "src/.../ProductRepository.java",
         "lines": "12",
         "description": "JPA å…§å»ºæ–¹æ³•ï¼Œä¿å­˜ Entity åˆ°è³‡æ–™åº«",
         "calls": []
       },
       {
         "level": 2,
         "type": "mybatis-mapper",
         "class": "ProductMapper",
         "method": "insertProduct",
         "file": "src/main/resources/mapper/ProductMapper.xml",
         "lines": "25-35",
         "sql_type": "insert",
         "description": "MyBatis INSERT èªå¥ï¼Œå°‡å•†å“è³‡æ–™æ’å…¥ products è¡¨",
         "sql_snippet": "INSERT INTO products (name, price, stock) VALUES (#{name}, #{price}, #{stock})",
         "dynamic_sql": false,
         "calls": []
       }
     ],
     "mybatis_mappers": [
       {
         "interface": "ProductMapper.java",
         "xml": "src/main/resources/mapper/ProductMapper.xml",
         "statements": [
           {"id": "insertProduct", "type": "insert", "line": 25},
           {"id": "selectByName", "type": "select", "line": 40}
         ]
       }
     ],
     "entities_involved": [
       {
         "class": "Product",
         "file": "src/.../entity/Product.java",
         "table": "products",
         "key_fields": ["id", "name", "price", "stock", "categoryId"]
       },
       {
         "class": "ProductDTO",
         "file": "src/.../dto/ProductDTO.java",
         "purpose": "è«‹æ±‚/éŸ¿æ‡‰è³‡æ–™å‚³è¼¸ç‰©ä»¶"
       }
     ],
     "cross_cutting": {
       "transaction": "@Transactional on ProductServiceImpl.createProduct",
       "validation": "@Valid on request body",
       "exception_handling": "throws ProductAlreadyExistsException"
     }
   }
   ```

   **é‡è¦è¦å‰‡**ï¼š
   - â— æ¯å€‹æ–¹æ³•å¼•ç”¨å¿…é ˆæœ‰å¯¦éš›æª”æ¡ˆè·¯å¾‘å’Œè¡Œè™Ÿ
   - â— ä½¿ç”¨ Read é©—è­‰æ¯å€‹æª”æ¡ˆå…§å®¹
   - â— å¦‚æœè¿½è¹¤åˆ°ç¬¬ä¸‰æ–¹åº«ï¼ˆå¦‚ JpaRepositoryï¼‰ï¼Œæ¨™è¨˜ç‚ºã€Œæ¡†æ¶å…§å»ºã€ä¸å†æ·±å…¥
   - â— æœ€å¤§è¿½è¹¤æ·±åº¦ï¼š5 å±¤ï¼ˆé˜²æ­¢ç„¡é™éæ­¸ï¼‰
   - â— åªè¿”å› JSONï¼Œä¸åŸ·è¡Œ Write æ“ä½œ
   - â— **åªè®€å– .java å’Œ .xml æª”æ¡ˆ**ï¼ˆæ’é™¤ pom.xmlï¼‰
   - â— MyBatis Mapper XML é€šå¸¸ä½æ–¼ `src/main/resources/mapper/` æˆ–é¡ä¼¼ç›®éŒ„

7. ç­‰å¾…æ‰€æœ‰è¿½è¹¤ä»£ç†å®Œæˆï¼Œæ”¶é›†çµæœ

8. åˆä½µæ‰€æœ‰èª¿ç”¨éˆä¸¦å¯«å…¥ï¼š`.legacy-analysis/domain-{keyword}-{timestamp}/02-call-chains.json`

---

## éšæ®µ 3: ç™¼ç¾æå–èˆ‡è©•åˆ†

9. å¾èª¿ç”¨éˆä¸­æå–**ç™¼ç¾ï¼ˆFindingsï¼‰**ï¼š

   å°‡èª¿ç”¨éˆè½‰æ›ç‚ºçµæ§‹åŒ–ç™¼ç¾ï¼Œæ¯å€‹ç™¼ç¾ä»£è¡¨ä¸€å€‹é‡è¦çš„çŸ¥è­˜é»ï¼š

   **ç™¼ç¾é¡å‹**ï¼š
   - `entry-point`ï¼šAPI å…¥å£é»
   - `business-logic`ï¼šæ¥­å‹™é‚è¼¯
   - `data-operation`ï¼šè³‡æ–™æ“ä½œ
   - `validation`ï¼šé©—è­‰è¦å‰‡
   - `transaction`ï¼šäº‹å‹™ç®¡ç†
   - `exception`ï¼šç•°å¸¸è™•ç†
   - `entity`ï¼šè³‡æ–™æ¨¡å‹
   - `mybatis-sql`ï¼šMyBatis SQL èªå¥ï¼ˆä¾†è‡ª .xml mapperï¼‰
   - `mybatis-dynamic`ï¼šMyBatis å‹•æ…‹ SQLï¼ˆif, choose, foreachï¼‰

   **ç™¼ç¾æ ¼å¼**ï¼ˆèˆ‡ analyze-java ç›¸å®¹ï¼‰ï¼š
   ```json
   {
     "finding_id": "DOMAIN-001",
     "type": "entry-point",
     "title": "å•†å“å»ºç«‹ API ç«¯é»",
     "description": "POST /api/products ç«¯é»æ¥æ”¶å•†å“å»ºç«‹è«‹æ±‚ï¼Œä½¿ç”¨ @Valid é©—è­‰è¼¸å…¥çš„ ProductDTO",
     "evidence": [
       {
         "file": "src/main/java/com/example/controller/ProductController.java",
         "lines": "67-85",
         "snippet": "@PostMapping\npublic ResponseEntity<Product> createProduct(@Valid @RequestBody ProductDTO dto)"
       }
     ],
     "importance": "high",
     "call_chain_ref": "chain-1"
   }
   ```

10. å°æ¯å€‹ç™¼ç¾å•Ÿå‹• **Haiku ä»£ç†**é€²è¡Œè©•åˆ†ï¼ˆèˆ‡ analyze-java ç›¸åŒçš„è©•åˆ†æ©Ÿåˆ¶ï¼‰ï¼š

    **è©•åˆ†ç¶­åº¦**ï¼š
    - è­‰æ“šå¼·åº¦ (40%)ï¼šæª”æ¡ˆè·¯å¾‘é©—è­‰ã€è¡Œè™Ÿæº–ç¢ºæ€§
    - é‡è¦æ€§ (30%)ï¼šå°ç†è§£é ˜åŸŸé‚è¼¯çš„é‡è¦ç¨‹åº¦
    - å®Œæ•´æ€§ (15%)ï¼šæè¿°æ˜¯å¦æ¸…æ™°å®Œæ•´
    - æº–ç¢ºæ€§ (15%)ï¼šæŠ€è¡“æè¿°æ˜¯å¦æ­£ç¢º

    **è¼¸å‡ºæ ¼å¼**ï¼š
    ```json
    {
      "finding_id": "DOMAIN-001",
      "scores": {
        "evidence": 95,
        "importance": 90,
        "completeness": 85,
        "accuracy": 95
      },
      "total_score": 92.25,
      "confidence_level": "very_high"
    }
    ```

11. âš ï¸ **MANDATORY**: ç­‰å¾…æ‰€æœ‰è©•åˆ†å®Œæˆï¼Œä¸å¯è·³é

12. å°‡è©•åˆ†çµæœå¯«å…¥ï¼š`.legacy-analysis/domain-{keyword}-{timestamp}/03-scores.json`

---

## éšæ®µ 4: éæ¿¾èˆ‡æ•´ç†

13. æ‡‰ç”¨éæ¿¾è¦å‰‡ï¼ˆèˆ‡ analyze-java ç›¸åŒï¼‰ï¼š
    - ä¿ç•™ total_score >= 75
    - evidence < 60 å¼·åˆ¶ä¸Ÿæ£„
    - accuracy < 50 å¼·åˆ¶ä¸Ÿæ£„
    - importance >= 90 ä¸” evidence >= 70 ä¾‹å¤–ä¿ç•™

14. æŒ‰èª¿ç”¨éˆé †åºçµ„ç¹”ç™¼ç¾ï¼š
    - å°‡ç™¼ç¾æŒ‰å…¶åœ¨èª¿ç”¨éˆä¸­çš„ä½ç½®æ’åº
    - æ¨™è¨˜ç™¼ç¾ä¹‹é–“çš„é—œè¯é—œä¿‚

15. å¯«å…¥çµæ§‹åŒ–è³‡æ–™ï¼š`.legacy-analysis/domain-{keyword}-{timestamp}/04-structured.json`

---

## éšæ®µ 5: é ˜åŸŸæ–‡ä»¶ç”Ÿæˆï¼ˆåˆ†æª”ç­–ç•¥ï¼‰

âš ï¸ **é‡è¦ï¼šç‚ºé¿å…å–®ä¸€æ–‡ä»¶éå¤§å°è‡´ token é™åˆ¶å•é¡Œï¼Œæ¡ç”¨åˆ†æª”ç­–ç•¥**

### æ–‡ä»¶æ’°å¯«åŸå‰‡ï¼ˆæ ¸å¿ƒå®ˆå‰‡ï¼‰

**æ–‡ä»¶ç›®çš„**ï¼šå¹«åŠ©å·¥ç¨‹å¸«/é–‹ç™¼è€…/æ–°äººç†è§£ç¾æœ‰å°ˆæ¡ˆçš„ domain know-how èˆ‡ project designã€‚

**å¿…é ˆåˆªé™¤çš„å…§å®¹é¡å‹**ï¼š
- âŒ æ”¹å–„å»ºè­°ã€å„ªåŒ–å»ºè­°ï¼ˆå¦‚ã€Œå»ºè­°å¯¦ä½œå¿«å–ã€ã€ã€Œæœªä¾†å¯ä»¥åŠ å…¥ A/B Testingã€ï¼‰
- âŒ æ•ˆèƒ½å„ªåŒ–ç­–ç•¥ï¼ˆå¦‚ã€Œå¹³è¡Œè™•ç†ã€ã€ã€Œæ‰¹æ¬¡æŸ¥è©¢ã€å»ºè­°ï¼‰
- âŒ æ¸¬è©¦ä»£ç¢¼ç¯„ä¾‹ï¼ˆæ¸¬è©¦æ‡‰è©²åœ¨æ¸¬è©¦æª”æ¡ˆæœ¬èº«æŸ¥çœ‹ï¼‰
- âŒ å‡è¨­æ€§/ç¯„ä¾‹æ€§ç¨‹å¼ç¢¼ï¼ˆåªä¿ç•™å¯¦éš›ç¨‹å¼ç¢¼å¼•ç”¨ï¼‰
- âŒ ã€Œæ‡‰è©²ã€ã€Œå»ºè­°ã€ã€Œå„ªåŒ–ã€ã€Œæœªä¾†ã€å­—çœ¼çš„æ®µè½
- âŒ ç›£æ§èˆ‡å‘Šè­¦å»ºè­°ï¼ˆå¦‚ã€Œæ‡‰è©²å¯¦ä½œçš„ç›£æ§æŒ‡æ¨™ã€ï¼‰

**å¿…é ˆä¿ç•™çš„å…§å®¹é¡å‹**ï¼š
- âœ… ç¾æœ‰ç¨‹å¼ç¢¼çš„çµæ§‹èˆ‡é‚è¼¯èªªæ˜
- âœ… å¯¦éš›çš„æ¥­å‹™è¦å‰‡ï¼ˆå¾ç¨‹å¼ç¢¼ä¸­æå–ï¼‰
- âœ… è³‡æ–™æ¨¡å‹èˆ‡é—œè¯é—œä¿‚
- âœ… èª¿ç”¨éˆèˆ‡æµç¨‹åœ–
- âœ… éŒ¯èª¤è¨Šæ¯å°ç…§è¡¨ï¼ˆç¾æœ‰çš„ï¼‰
- âœ… æª”æ¡ˆä½ç½®é€ŸæŸ¥

**ç¨‹å¼ç¢¼å¼•ç”¨åŸå‰‡**ï¼š
- åªä¿ç•™ 5-15 è¡Œçš„é—œéµé‚è¼¯ç‰‡æ®µ
- å¿…é ˆæ¨™è¨»æª”æ¡ˆè·¯å¾‘å’Œè¡Œè™Ÿï¼ˆå¦‚ `ProductService.java:45-60`ï¼‰
- å®Œæ•´ä»£ç¢¼æ‡‰å¼•å°è®€è€…æŸ¥çœ‹åŸå§‹æª”æ¡ˆ
- ç¦æ­¢å‡è¨­æ€§æˆ–ç°¡åŒ–ç¯„ä¾‹ç¨‹å¼ç¢¼

**é¿å…é‡è¤‡åŸå‰‡**ï¼š
- API ç«¯é»åˆ—è¡¨åªåœ¨ 00-INDEX.md
- DTO æ¬„ä½èªªæ˜åªåœ¨ 03-data-model.md
- æ¥­å‹™è¦å‰‡åªåœ¨ 04-business-rules.md
- éŒ¯èª¤ç¢¼å°ç…§åªåœ¨ 04-business-rules.md
- å¸¸æ•¸å®šç¾©åªåœ¨ 03-data-model.md

---

16. **ä¾ç« ç¯€åˆ†æª”ç”Ÿæˆ**ï¼Œæ¯å€‹ç« ç¯€ç”±ç¨ç«‹çš„ **Sonnet ä»£ç†**ç”Ÿæˆï¼š

    **è¼¸å…¥**ï¼ˆæ‰€æœ‰ä»£ç†å…±ç”¨ï¼‰ï¼š
    - çµæ§‹åŒ–ç™¼ç¾ JSONï¼ˆ04-structured.jsonï¼‰
    - èª¿ç”¨éˆ JSONï¼ˆ02-call-chains.jsonï¼‰
    - å…¥å£é» JSONï¼ˆ01-entry-points.jsonï¼‰
    - ä½¿ç”¨è€…åŸå§‹æŸ¥è©¢

    ---

    ### æ–‡ä»¶ 1: ç´¢å¼•é  (00-INDEX.md) - ç›®æ¨™ ~50 è¡Œ

    ç”±ä¸» session ç›´æ¥ç”Ÿæˆï¼Œå…§å®¹ï¼š
    - é ˜åŸŸåç¨±å’Œç°¡ä»‹ï¼ˆ2-3 å¥è©±ï¼‰
    - æ–‡ä»¶æ¸…å–®èˆ‡é€£çµ
    - API ç«¯é»ç¸½è¦½è¡¨æ ¼ï¼ˆå”¯ä¸€å‡ºç¾ä½ç½®ï¼‰
    - å¿«é€Ÿçµ±è¨ˆ

    ```markdown
    # {é ˜åŸŸåç¨±} é ˜åŸŸåˆ†æ

    > æœ¬æ–‡ä»¶å¹«åŠ©ä½ ç†è§£ {é ˜åŸŸåç¨±} çš„ç¾æœ‰å¯¦ä½œï¼Œä¸åŒ…å«æ”¹å–„å»ºè­°ã€‚

    ## API ç«¯é»ç¸½è¦½

    | HTTP æ–¹æ³• | è·¯å¾‘ | Controller æ–¹æ³• | ç”¨é€” |
    |-----------|------|----------------|------|
    | POST | /api/products | createProduct | å»ºç«‹å•†å“ |
    | GET | /api/products/{id} | getProduct | æŸ¥è©¢å•†å“ |

    ## æ–‡ä»¶ç´¢å¼•

    | æ–‡ä»¶ | èªªæ˜ | ç›®æ¨™è®€è€… |
    |------|------|----------|
    | [01-æ¦‚è¿°](./01-overview.md) | é ˜åŸŸæ¦‚å¿µã€æ¶æ§‹å…¨è²Œ | æ–°äººã€PM |
    | [02-èª¿ç”¨éˆ](./02-call-chains.md) | ç¨‹å¼ç¢¼å°è¦½ã€å‘¼å«è·¯å¾‘ | é–‹ç™¼è€… |
    | [03-è³‡æ–™æ¨¡å‹](./03-data-model.md) | DTO/Entity/Enum åƒè€ƒ | é–‹ç™¼è€… |
    | [04-æ¥­å‹™è¦å‰‡](./04-business-rules.md) | æ¥­å‹™é‚è¼¯ã€éŒ¯èª¤ç¢¼ | é–‹ç™¼è€…ã€QA |
    | [05-æª”æ¡ˆç´¢å¼•](./05-guide.md) | æª”æ¡ˆä½ç½®é€ŸæŸ¥ | é–‹ç™¼è€… |

    ## å¿«é€Ÿçµ±è¨ˆ

    - å…¥å£é»: {N} å€‹
    - èª¿ç”¨éˆ: {M} æ¢
    - æ¶‰åŠé¡åˆ¥: {K} å€‹
    ```

    ---

    ### æ–‡ä»¶ 2: æ¦‚è¿° (01-overview.md) - ç›®æ¨™ ~150 è¡Œ

    **ä»£ç†ä»»å‹™**ï¼šç”Ÿæˆé ˜åŸŸæ¦‚è¿°å’Œæ¶æ§‹åœ–

    **ä¿ç•™å…§å®¹**ï¼š
    - ç°¡ä»‹ï¼ˆ3-5 å¥è©±ï¼‰
    - æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨ï¼ˆbullet pointsï¼‰
    - æŠ€è¡“ç‰¹è‰²ï¼ˆä½¿ç”¨äº†ä»€éº¼æ¡†æ¶/æ¨¡å¼ï¼‰
    - ç³»çµ±æ¶æ§‹åœ–ï¼ˆå–®ä¸€ Mermaid flowchartï¼‰
    - æ ¸å¿ƒé¡åˆ¥èªªæ˜è¡¨æ ¼ï¼ˆé¡åˆ¥åã€æª”æ¡ˆè·¯å¾‘ã€è·è²¬ï¼‰

    **åˆªé™¤å…§å®¹**ï¼š
    - âŒ æ•ˆèƒ½è€ƒé‡/å„ªåŒ–ç­–ç•¥
    - âŒ æœªä¾†æ“´å±•æ–¹å‘
    - âŒ æ¸¬è©¦ç­–ç•¥
    - âŒ è©³ç´° DTO è¨­è¨ˆï¼ˆç§»åˆ° 03-data-model.mdï¼‰
    - âŒ API ç«¯é»åˆ—è¡¨ï¼ˆå·²åœ¨ 00-INDEX.mdï¼‰
    - âŒ å¤šå€‹åºåˆ—åœ–ï¼ˆåªä¿ç•™ä¸€å€‹æœ€é‡è¦çš„ï¼‰

    **Mermaid åœ–è¡¨é™åˆ¶**ï¼š
    - åªä½¿ç”¨ä¸€å€‹æ•´é«”æ¶æ§‹ flowchart
    - åªä¿ç•™ä¸€å€‹æœ€é‡è¦ API çš„åºåˆ—åœ–
    - åºåˆ—åœ–ä¸è¶…é 15 è¡Œ

    ---

    ### æ–‡ä»¶ 3: èª¿ç”¨éˆè©³è§£ (02-call-chains.md) - ç›®æ¨™ ~200 è¡Œ

    **ä»£ç†ä»»å‹™**ï¼šèªªæ˜ç¨‹å¼ç¢¼å‘¼å«è·¯å¾‘

    **ä¿ç•™å…§å®¹**ï¼š
    - èª¿ç”¨éˆæ¦‚è¦½è¡¨æ ¼ï¼ˆå…¥å£é»ã€æ¶‰åŠé¡åˆ¥ã€ä¸»è¦åŠŸèƒ½ï¼‰
    - æ¶æ§‹åˆ†å±¤èªªæ˜ï¼ˆController â†’ Service â†’ Repositoryï¼‰
    - æ¯æ¢èª¿ç”¨éˆçš„å±¤ç´šçµæ§‹ï¼ˆç²¾ç°¡ç‰ˆï¼‰ï¼š
      - é¡åˆ¥å’Œæ–¹æ³•åç¨±
      - æª”æ¡ˆè·¯å¾‘:è¡Œè™Ÿ
      - 3-5 å¥åŠŸèƒ½èªªæ˜
      - é‡è¦è¨»è§£ï¼ˆ@Transactional, @Validï¼‰
    - å…±ç”¨å…ƒä»¶èªªæ˜

    **åˆªé™¤å…§å®¹**ï¼š
    - âŒ æ•ˆèƒ½ç“¶é ¸åˆ†æ
    - âŒ å„ªåŒ–ç­–ç•¥å»ºè­°
    - âŒ å†—é•·çš„ç¨‹å¼ç¢¼å€å¡Šï¼ˆæ¯å€‹ä¸è¶…é 10 è¡Œï¼‰
    - âŒ é‡è¤‡çš„ Kutt API æ•´åˆèªªæ˜ï¼ˆæ•´åˆè‡³æ­¤æ–‡ä»¶ä¸€æ¬¡ï¼‰

    **ç¨‹å¼ç¢¼ç‰‡æ®µé™åˆ¶**ï¼š
    - æ¯å€‹æ–¹æ³•åªä¿ç•™é—œéµ 5-10 è¡Œ
    - å¿…é ˆæ¨™è¨» `æª”æ¡ˆå:è¡Œè™Ÿ`
    - ä»¥ `// ... å®Œæ•´å¯¦ä½œè«‹è¦‹åŸå§‹æª”æ¡ˆ` çµå°¾

    **èª¿ç”¨éˆå‘ˆç¾æ ¼å¼**ï¼ˆç²¾ç°¡ç‰ˆï¼‰ï¼š
    ```markdown
    ### èª¿ç”¨éˆ 1: å»ºç«‹å•†å“

    | å±¤ç´š | é¡åˆ¥.æ–¹æ³• | æª”æ¡ˆä½ç½® | èªªæ˜ |
    |------|----------|----------|------|
    | 0 | ProductController.createProduct | ProductController.java:67 | æ¥æ”¶è«‹æ±‚ |
    | 1 | ProductService.createProduct | ProductServiceImpl.java:45 | æ¥­å‹™é‚è¼¯ |
    | 2 | ProductRepository.save | ProductRepository.java:12 | è³‡æ–™å­˜å– |

    **é—œéµé‚è¼¯** (`ProductServiceImpl.java:50-55`):
    ```java
    if (productRepository.existsByName(dto.getName())) {
        throw new ProductAlreadyExistsException();
    }
    return productRepository.save(product);
    // ... å®Œæ•´å¯¦ä½œè«‹è¦‹åŸå§‹æª”æ¡ˆ
    ```
    ```

    ---

    ### æ–‡ä»¶ 4: è³‡æ–™æ¨¡å‹ (03-data-model.md) - ç›®æ¨™ ~200 è¡Œ

    **ä»£ç†ä»»å‹™**ï¼šèªªæ˜è³‡æ–™çµæ§‹ï¼ˆå”¯ä¸€ä¾†æºï¼‰

    **ä¿ç•™å…§å®¹**ï¼š
    - DTO/Entity é—œä¿‚åœ–ï¼ˆMermaid erDiagramï¼‰
    - Entity æ¬„ä½èªªæ˜è¡¨æ ¼ï¼ˆé¡åˆ¥ã€æ¬„ä½ã€å‹åˆ¥ã€èªªæ˜ï¼‰
    - DTO æ¬„ä½èªªæ˜è¡¨æ ¼
    - Enum å®šç¾©è¡¨æ ¼
    - å¸¸æ•¸å®šç¾©è¡¨æ ¼ï¼ˆå”¯ä¸€ä½ç½®ï¼‰
    - è³‡æ–™æµè½‰èªªæ˜ï¼ˆç°¡çŸ­ï¼‰

    **åˆªé™¤å…§å®¹**ï¼š
    - âŒ æ•ˆèƒ½è€ƒé‡
    - âŒ æ¸¬è©¦è³‡æ–™ç¯„ä¾‹
    - âŒ å‡è¨­æ€§çš„è¡¨çµæ§‹
    - âŒ ç°¡åŒ–ç¯„ä¾‹ DTO ç¨‹å¼ç¢¼

    **è¡¨æ ¼æ ¼å¼ç¯„ä¾‹**ï¼š
    ```markdown
    ## Entity: Product (`ProductEntity.java:15`)

    | æ¬„ä½ | å‹åˆ¥ | å°æ‡‰è³‡æ–™è¡¨æ¬„ä½ | èªªæ˜ |
    |------|------|---------------|------|
    | id | Long | product_id | ä¸»éµ |
    | name | String | product_name | å•†å“åç¨± |
    ```

    ---

    ### æ–‡ä»¶ 5: æ¥­å‹™è¦å‰‡èˆ‡ç•°å¸¸ (04-business-rules.md) - ç›®æ¨™ ~150 è¡Œ

    **ä»£ç†ä»»å‹™**ï¼šæ•´ç†ç¾æœ‰æ¥­å‹™è¦å‰‡ï¼ˆå”¯ä¸€ä¾†æºï¼‰

    **ä¿ç•™å…§å®¹**ï¼š
    - æ¥­å‹™è¦å‰‡æ¸…å–®è¡¨æ ¼ï¼ˆè¦å‰‡ã€ç¨‹å¼ç¢¼ä½ç½®ã€èªªæ˜ï¼‰
    - éŒ¯èª¤ç¢¼/éŒ¯èª¤è¨Šæ¯å°ç…§è¡¨ï¼ˆå”¯ä¸€ä½ç½®ï¼‰
    - ç•°å¸¸é¡åˆ¥åˆ—è¡¨ï¼ˆé¡åˆ¥åã€è§¸ç™¼æ¢ä»¶ã€HTTP ç‹€æ…‹ç¢¼ï¼‰
    - é©—è­‰é‚è¼¯æ‘˜è¦ï¼ˆ@Valid æ¬„ä½ã€è‡ªå®šç¾©é©—è­‰ï¼‰

    **åˆªé™¤å…§å®¹**ï¼š
    - âŒ æ¸¬è©¦è¦†è“‹å»ºè­°
    - âŒ æ•ˆèƒ½è€ƒé‡
    - âŒ ä¿®æ”¹æŒ‡å—
    - âŒ æ¸¬è©¦ SQL ç¯„ä¾‹

    **è¡¨æ ¼æ ¼å¼ç¯„ä¾‹**ï¼š
    ```markdown
    ## æ¥­å‹™è¦å‰‡

    | è¦å‰‡ | ç¨‹å¼ç¢¼ä½ç½® | èªªæ˜ |
    |------|-----------|------|
    | å•†å“åç¨±ä¸å¯é‡è¤‡ | ProductServiceImpl.java:48 | å»ºç«‹å‰æª¢æŸ¥ |
    | åƒ¹æ ¼å¿…é ˆå¤§æ–¼ 0 | ProductDTO.java:23 | @Min(1) é©—è­‰ |

    ## éŒ¯èª¤ç¢¼å°ç…§

    | éŒ¯èª¤ç¢¼ | HTTP ç‹€æ…‹ | è¨Šæ¯ | è§¸ç™¼æ¢ä»¶ |
    |--------|----------|------|----------|
    | PRODUCT_001 | 409 | å•†å“åç¨±å·²å­˜åœ¨ | åç¨±é‡è¤‡ |
    ```

    ---

    ### æ–‡ä»¶ 6: æª”æ¡ˆç´¢å¼• (05-guide.md) - ç›®æ¨™ ~100 è¡Œ

    **ä»£ç†ä»»å‹™**ï¼šæä¾›æª”æ¡ˆä½ç½®é€ŸæŸ¥ï¼ˆæœ€æœ‰åƒ¹å€¼çš„åƒè€ƒï¼‰

    **ä¿ç•™å…§å®¹**ï¼š
    - ç›¸é—œæª”æ¡ˆæ¸…å–®ï¼ˆæŒ‰é¡å‹åˆ†é¡ï¼‰
      - Controllers
      - Services
      - Repositories
      - Entities
      - DTOs
      - Mappers (MyBatis XML)
      - æ¸¬è©¦æª”æ¡ˆä½ç½®ï¼ˆåƒ…åˆ—å‡ºè·¯å¾‘ï¼Œä¸è©³è¿°ï¼‰
    - å¸¸è¦‹å•é¡Œåˆ—è¡¨ï¼ˆåƒ…æ¨™é¡Œå’Œ 1 å¥èªªæ˜ï¼Œä¸è©³è¿°è§£æ³•ï¼‰

    **åˆªé™¤å…§å®¹**ï¼š
    - âŒ å¦‚ä½•ä¿®æ”¹æ­¤æµç¨‹ï¼ˆæ”¹å–„å»ºè­°ï¼‰
    - âŒ æ•ˆèƒ½å„ªåŒ–å»ºè­°
    - âŒ æ¸¬è©¦ç­–ç•¥è©³è¿°
    - âŒ éƒ¨ç½²èˆ‡é…ç½®è©³è¿°
    - âŒ API æ¸¬è©¦ç¯„ä¾‹ï¼ˆcurl/Postmanï¼‰
    - âŒ é™¤éŒ¯æŠ€å·§è©³è¿°

    **æª”æ¡ˆæ¸…å–®æ ¼å¼**ï¼š
    ```markdown
    ## ç›¸é—œæª”æ¡ˆ

    ### Controllers
    - `src/main/java/.../ProductController.java` - å•†å“ API å…¥å£

    ### Services
    - `src/main/java/.../ProductService.java` - ä»‹é¢
    - `src/main/java/.../ProductServiceImpl.java` - å¯¦ä½œ

    ### Tests
    - `src/test/java/.../ProductServiceTest.java`
    - `src/test/java/.../ProductControllerTest.java`

    ## å¸¸è¦‹å•é¡Œ

    | å•é¡Œ | ç›¸é—œæª”æ¡ˆ |
    |------|----------|
    | å•†å“å»ºç«‹å¤±æ•— | ProductServiceImpl.java:48 |
    | åƒ¹æ ¼é©—è­‰éŒ¯èª¤ | ProductDTO.java:23 |
    ```

    ---

    **æ’°å¯«é¢¨æ ¼**ï¼ˆæ‰€æœ‰æ–‡ä»¶é€šç”¨ï¼‰ï¼š
    - ä½¿ç”¨ç¹é«”ä¸­æ–‡
    - å‡è¨­è®€è€…ä¸äº†è§£æ­¤å°ˆæ¡ˆ
    - å„ªå…ˆä½¿ç”¨è¡¨æ ¼å‘ˆç¾çµæ§‹åŒ–è³‡è¨Š
    - æ‰€æœ‰ç¨‹å¼ç¢¼å¼•ç”¨å¿…é ˆæœ‰ `æª”æ¡ˆå:è¡Œè™Ÿ`
    - æ¯å€‹æ–‡ä»¶é–‹é ­åŒ…å«è¿”å›ç´¢å¼•çš„é€£çµ
    - æ¯å€‹è³‡è¨Šåªå‡ºç¾åœ¨ä¸€å€‹æ–‡ä»¶ä¸­ï¼ˆé¿å…é‡è¤‡ï¼‰
    - **ç¦æ­¢ä½¿ç”¨ã€Œå»ºè­°ã€ã€Œæ‡‰è©²ã€ã€Œå„ªåŒ–ã€ã€Œæœªä¾†ã€ç­‰å­—çœ¼**

17. **ä¸¦è¡Œç”Ÿæˆæ–‡ä»¶**ï¼š

    å•Ÿå‹• **4 å€‹ Sonnet ä»£ç†**ä¸¦è¡Œç”Ÿæˆæ–‡ä»¶ 2-5ï¼š
    - ä»£ç† A: ç”Ÿæˆ `01-overview.md`ï¼ˆç›®æ¨™ ~150 è¡Œï¼‰
    - ä»£ç† B: ç”Ÿæˆ `02-call-chains.md`ï¼ˆç›®æ¨™ ~200 è¡Œï¼‰
    - ä»£ç† C: ç”Ÿæˆ `03-data-model.md`ï¼ˆç›®æ¨™ ~200 è¡Œï¼‰
    - ä»£ç† D: ç”Ÿæˆ `04-business-rules.md`ï¼ˆ~150 è¡Œï¼‰+ `05-guide.md`ï¼ˆ~100 è¡Œï¼‰

    ä¸» session åŒæ™‚ç”Ÿæˆ `00-INDEX.md`ï¼ˆç›®æ¨™ ~50 è¡Œï¼‰

    **é æœŸç¸½è¡Œæ•¸**ï¼šç´„ 850 è¡Œï¼ˆç›¸æ¯”åŸæœ¬ 4000+ è¡Œæ¸›å°‘ç´„ 80%ï¼‰

18. å°‡æ‰€æœ‰æ–‡ä»¶å¯«å…¥ï¼š`.legacy-analysis/domain-{keyword}-{timestamp}/docs/`

    ```
    docs/
    â”œâ”€â”€ 00-INDEX.md           # ç´¢å¼•é  (~50 è¡Œ)
    â”œâ”€â”€ 01-overview.md        # æ¦‚è¿° (~150 è¡Œ)
    â”œâ”€â”€ 02-call-chains.md     # èª¿ç”¨éˆ (~200 è¡Œ)
    â”œâ”€â”€ 03-data-model.md      # è³‡æ–™æ¨¡å‹ (~200 è¡Œ)
    â”œâ”€â”€ 04-business-rules.md  # æ¥­å‹™è¦å‰‡ (~150 è¡Œ)
    â””â”€â”€ 05-guide.md           # æª”æ¡ˆç´¢å¼• (~100 è¡Œ)
    ```

---

## å®Œæˆ

19. é¡¯ç¤ºå®Œæˆæ‘˜è¦ï¼š

    ```
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘     Legacy Domain Analyzer - é ˜åŸŸåˆ†æå®Œæˆ                   â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸ¯ åˆ†æé ˜åŸŸ: {é ˜åŸŸé—œéµå­—}

    ğŸ“ å·¥ä½œç›®éŒ„: .legacy-analysis/domain-{keyword}-{timestamp}/

    ğŸ“„ ç”Ÿæˆçš„æ–‡ä»¶:
      â”œâ”€ 01-entry-points.json      (å…¥å£é» {N} å€‹)
      â”œâ”€ 02-call-chains.json       (èª¿ç”¨éˆ {M} æ¢)
      â”œâ”€ 03-scores.json            (è©•åˆ†çµæœ)
      â”œâ”€ 04-structured.json        (çµæ§‹åŒ–ç™¼ç¾ {K} å€‹)
      â””â”€ docs/                     (é ˜åŸŸåˆ†ææ–‡ä»¶ - ç²¾ç°¡ç‰ˆ) â­
          â”œâ”€ 00-INDEX.md           (~50 è¡Œ) ç´¢å¼•èˆ‡ API ç¸½è¦½
          â”œâ”€ 01-overview.md        (~150 è¡Œ) æ¦‚è¿°èˆ‡æ¶æ§‹åœ–
          â”œâ”€ 02-call-chains.md     (~200 è¡Œ) èª¿ç”¨éˆè©³è§£
          â”œâ”€ 03-data-model.md      (~200 è¡Œ) è³‡æ–™æ¨¡å‹
          â”œâ”€ 04-business-rules.md  (~150 è¡Œ) æ¥­å‹™è¦å‰‡
          â””â”€ 05-guide.md           (~100 è¡Œ) æª”æ¡ˆç´¢å¼•

    ğŸ“Š åˆ†æçµ±è¨ˆ:
      - ç¸½åŸ·è¡Œæ™‚é–“: {X} åˆ† {Y} ç§’
      - è¿½è¹¤çš„èª¿ç”¨éˆ: {M} æ¢
      - æ–‡ä»¶ç¸½è¡Œæ•¸: ~850 è¡Œï¼ˆç²¾ç°¡ç‰ˆï¼‰
      - å¹³å‡ç½®ä¿¡åº¦: {score}

    ğŸ”— ä¸»è¦å…¥å£é»:
      1. POST /api/products â†’ ProductController.createProduct
      2. ...

    ğŸ“– é–±è®€æŒ‡å—:
      - æ–°äºº/PM: å¾ 00-INDEX.md â†’ 01-overview.md
      - é–‹ç™¼è€…: 02-call-chains.md â†’ 03-data-model.md
      - QA: 04-business-rules.md

    ğŸ’¡ æ–‡ä»¶ç‰¹è‰²:
      - å°ˆæ³¨æ–¼ã€Œç†è§£ç¾æœ‰å°ˆæ¡ˆã€ï¼Œä¸å«æ”¹å–„å»ºè­°
      - æ¯å€‹è³‡è¨Šåªå‡ºç¾ä¸€æ¬¡ï¼Œç„¡é‡è¤‡å…§å®¹
      - æ‰€æœ‰ç¨‹å¼ç¢¼å¼•ç”¨åŒ…å«æª”æ¡ˆè·¯å¾‘å’Œè¡Œè™Ÿ
      - ç¸½è¨ˆç´„ 850 è¡Œï¼ˆç›¸æ¯”å®Œæ•´ç‰ˆæ¸›å°‘ 80%ï¼‰
    ```

---

## é‡è¦æ³¨æ„äº‹é …

- **ä¸¦è¡ŒåŸ·è¡Œ**ï¼š
  - éšæ®µ 2 çš„è¿½è¹¤ä»£ç†ï¼ˆæœ€å¤š 3 å€‹ï¼‰ä¸¦è¡Œå•Ÿå‹•
  - éšæ®µ 3 çš„è©•åˆ†ä»£ç†å…¨éƒ¨ä¸¦è¡Œå•Ÿå‹•
  - éšæ®µ 5 çš„æ–‡ä»¶ç”Ÿæˆä»£ç†ï¼ˆ4 å€‹ï¼‰ä¸¦è¡Œå•Ÿå‹•

- **ç²¾ç°¡æ–‡ä»¶ç­–ç•¥**ï¼š
  - æ¡ç”¨ 6 å€‹ç²¾ç°¡æ–‡ä»¶ï¼ˆç¸½è¨ˆ ~850 è¡Œï¼‰
  - æ¯å€‹æ–‡ä»¶æœ‰æ˜ç¢ºçš„ç›®æ¨™è¡Œæ•¸é™åˆ¶
  - ç¦æ­¢ã€Œå»ºè­°ã€ã€Œæ‡‰è©²ã€ã€Œå„ªåŒ–ã€ã€Œæœªä¾†ã€å­—çœ¼
  - æ¯å€‹è³‡è¨Šåªå‡ºç¾åœ¨ä¸€å€‹æ–‡ä»¶ä¸­ï¼ˆé¿å…é‡è¤‡ï¼‰
  - ç¨‹å¼ç¢¼ç‰‡æ®µé™åˆ¶ 5-15 è¡Œï¼Œå¼•å°è®€è€…çœ‹åŸå§‹æª”æ¡ˆ

- **èˆ‡ analyze-java çš„äº’è£œæ€§**ï¼š
  - å…ˆç”¨ `analyze-java-domain` ç†è§£ç‰¹å®šåŠŸèƒ½
  - å¦‚éœ€å…¨å±€è¦–è§’ï¼Œå†ç”¨ `analyze-java`
  - å…©è€…è¼¸å‡ºæ ¼å¼ç›¸å®¹ï¼Œå¯ä»¥åˆä½µ

- **æœå°‹ç­–ç•¥å„ªåŒ–**ï¼š
  - ä½¿ç”¨å¤šç¨®é—œéµå­—è®Šé«”ï¼ˆä¸­è‹±æ–‡ã€é§å³°ã€ä¸‹åŠƒç·šï¼‰
  - ä½¿ç”¨æ­£å‰‡è¡¨é”å¼åŒ¹é…æ–¹æ³•åæ¨¡å¼
  - å¾ Controller é–‹å§‹è¿½è¹¤ï¼Œç¢ºä¿æ‰¾åˆ°å®Œæ•´æµç¨‹

- **æ·±åº¦å„ªå…ˆ vs å»£åº¦å„ªå…ˆ**ï¼š
  - æ­¤å‘½ä»¤æ¡ç”¨æ·±åº¦å„ªå…ˆç­–ç•¥
  - å®Œæ•´è¿½è¹¤ä¸€æ¢èª¿ç”¨éˆå¾Œå†è¿½è¹¤ä¸‹ä¸€æ¢
  - æœ€å¤§æ·±åº¦ 5 å±¤ï¼Œé¿å…éåº¦è¿½è¹¤

- **æ™‚é–“ä¼°ç®—**ï¼š
  - éšæ®µ 1: ç´„ 30 ç§’ï¼ˆHaiku å¿«é€Ÿæƒæï¼‰
  - éšæ®µ 2: ç´„ 2-3 åˆ†é˜ï¼ˆSonnet æ·±åº¦è¿½è¹¤ï¼Œæœ€å¤š 3 æ¢éˆï¼‰
  - éšæ®µ 3: ç´„ 10-20 ç§’ï¼ˆHaiku è©•åˆ†ï¼‰
  - éšæ®µ 4: ç´„ 10 ç§’ï¼ˆä¸» session è™•ç†ï¼‰
  - éšæ®µ 5: ç´„ 1-2 åˆ†é˜ï¼ˆ4 å€‹ Sonnet ä¸¦è¡Œç”Ÿæˆç²¾ç°¡æ–‡ä»¶ï¼‰
  - **ç¸½è¨ˆ: ç´„ 4-6 åˆ†é˜**
